"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const wunderbar = require('@gribnoysup/wunderbar');
const eol = require('os').EOL;
const logger_1 = require("../utils/logger");
const logger = logger_1.Logger.getInstance();
exports.drawChart = (timings, options) => {
    const { lmargin, width, xlabel, xmin, xmax } = options;
    const normalizedTimings = timings.map(value => {
        return {
            value: value.timing,
            label: value.title,
            color: value.color
        };
    });
    const { __raw } = wunderbar(normalizedTimings, {
        min: xmin,
        max: xmax,
        length: width,
        format: '0,000'
    });
    const { normalizedValues, minValueFormatted, maxValueFormatted } = __raw;
    const yAxis = '│';
    const xAxis = '─';
    const corner = '╰';
    const padding = ' '.repeat(lmargin);
    const chart = normalizedValues
        .reverse()
        .map((value) => {
        const pad = lmargin - value.label.length;
        const paddedLabel = ' '.repeat(pad > 0 ? pad : 0) + value.label;
        return `${paddedLabel} ${yAxis}${value.coloredChartBar} ${value.formattedValue}`;
    })
        .join(`${eol}${padding} ${yAxis}${eol}`);
    const chartTop = `${padding} ${yAxis}`;
    const chartBottom = `${padding} ${corner}${xAxis.repeat(width)}`;
    const labelPadding = ' '.repeat(Math.max(0, (width - xlabel.length - 2) / 2));
    const chartScale = `${padding}  ${minValueFormatted}${labelPadding}${xlabel}${labelPadding}${maxValueFormatted}`;
    logger.log('');
    logger.log([chartTop, chart, chartBottom, chartScale].join(eol));
    logger.log('');
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2hhcnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJjaGFydC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU0sU0FBUyxHQUFHLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO0FBQ25ELE1BQU0sR0FBRyxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUM7QUFHOUIsNENBQXVDO0FBQ3ZDLE1BQU0sTUFBTSxHQUFHLGVBQU0sQ0FBQyxXQUFXLEVBQUUsQ0FBQztBQUV2QixRQUFBLFNBQVMsR0FBRyxDQUFDLE9BQWlCLEVBQUUsT0FBcUIsRUFBRSxFQUFFO0lBQ3BFLE1BQU0sRUFBQyxPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFDLEdBQUcsT0FBTyxDQUFDO0lBRXJELE1BQU0saUJBQWlCLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRTtRQUM1QyxPQUFPO1lBQ0wsS0FBSyxFQUFFLEtBQUssQ0FBQyxNQUFNO1lBQ25CLEtBQUssRUFBRSxLQUFLLENBQUMsS0FBSztZQUNsQixLQUFLLEVBQUUsS0FBSyxDQUFDLEtBQUs7U0FDbkIsQ0FBQztJQUNKLENBQUMsQ0FBQyxDQUFDO0lBRUgsTUFBTSxFQUFDLEtBQUssRUFBQyxHQUFHLFNBQVMsQ0FBQyxpQkFBaUIsRUFBRTtRQUMzQyxHQUFHLEVBQUUsSUFBSTtRQUNULEdBQUcsRUFBRSxJQUFJO1FBQ1QsTUFBTSxFQUFFLEtBQUs7UUFDYixNQUFNLEVBQUUsT0FBTztLQUNoQixDQUFDLENBQUM7SUFFSCxNQUFNLEVBQUMsZ0JBQWdCLEVBQUUsaUJBQWlCLEVBQUUsaUJBQWlCLEVBQUMsR0FBRyxLQUFLLENBQUM7SUFFdkUsTUFBTSxLQUFLLEdBQUcsR0FBRyxDQUFDO0lBQ2xCLE1BQU0sS0FBSyxHQUFHLEdBQUcsQ0FBQztJQUNsQixNQUFNLE1BQU0sR0FBRyxHQUFHLENBQUM7SUFFbkIsTUFBTSxPQUFPLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUVwQyxNQUFNLEtBQUssR0FBRyxnQkFBZ0I7U0FDM0IsT0FBTyxFQUFFO1NBQ1QsR0FBRyxDQUFDLENBQUMsS0FBdUUsRUFBRSxFQUFFO1FBQy9FLE1BQU0sR0FBRyxHQUFHLE9BQU8sR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQztRQUN6QyxNQUFNLFdBQVcsR0FBRyxHQUFHLENBQUMsTUFBTSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQztRQUVoRSxPQUFPLEdBQUcsV0FBVyxJQUFJLEtBQUssR0FBRyxLQUFLLENBQUMsZUFBZSxJQUFJLEtBQUssQ0FBQyxjQUFjLEVBQUUsQ0FBQztJQUNuRixDQUFDLENBQUM7U0FDRCxJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsT0FBTyxJQUFJLEtBQUssR0FBRyxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBRTNDLE1BQU0sUUFBUSxHQUFHLEdBQUcsT0FBTyxJQUFJLEtBQUssRUFBRSxDQUFDO0lBRXZDLE1BQU0sV0FBVyxHQUFHLEdBQUcsT0FBTyxJQUFJLE1BQU0sR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7SUFFakUsTUFBTSxZQUFZLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFOUUsTUFBTSxVQUFVLEdBQUcsR0FBRyxPQUFPLEtBQUssaUJBQWlCLEdBQUcsWUFBWSxHQUFHLE1BQU0sR0FBRyxZQUFZLEdBQUcsaUJBQWlCLEVBQUUsQ0FBQztJQUVqSCxNQUFNLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ2YsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFFBQVEsRUFBRSxLQUFLLEVBQUUsV0FBVyxFQUFFLFVBQVUsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQ2pFLE1BQU0sQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDakIsQ0FBQyxDQUFDIn0=